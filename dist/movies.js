!function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t,n=(function(t){!function(){function n(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}n.normalize=function(e){return Array.isArray(e)?n("[",void 0,void 0,n.normalizeChildren(e),void 0,void 0):null!=e&&"object"!=typeof e?n("#",void 0,void 0,!1===e?"":e,void 0,void 0):e},n.normalizeChildren=function(e){for(var t=[],r=0;e.length>r;r++)t[r]=n.normalize(e[r]);return t};var r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i={},o={}.hasOwnProperty;function a(e){for(var t in e)if(o.call(e,t))return!1;return!0}function l(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t,l=arguments[1],s=2;if(null==l?l={}:("object"!=typeof l||null!=l.tag||Array.isArray(l))&&(l={},s=1),arguments.length===s+1)Array.isArray(t=arguments[s])||(t=[t]);else for(t=[];arguments.length>s;)t.push(arguments[s++]);return"string"==typeof e?function(e,t,r){var i,l,s=!1,c=o.call(t,"class")?"class":"className",u=t[c];if(!a(e.attrs)&&!a(t)){var d={};for(var f in t)o.call(t,f)&&(d[f]=t[f]);t=d}for(var f in e.attrs)o.call(e.attrs,f)&&"className"!==f&&!o.call(t,f)&&(t[f]=e.attrs[f]);for(var f in null==u&&null==e.attrs.className||(t.className=null!=u?null!=e.attrs.className?e.attrs.className+" "+u:u:null!=e.attrs.className?e.attrs.className:null),"class"===c&&(t.class=null),t)if(o.call(t,f)&&"key"!==f){s=!0;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?l=r[0].children:i=r,n(e.tag,t.key,s?t:null,i,l)}(i[e]||function(e){for(var t,n="div",o=[],a={};t=r.exec(e);){var l=t[1],s=t[2];if(""===l&&""!==s)n=s;else if("#"===l)a.id=s;else if("."===l)o.push(s);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?o.push(c):a[t[4]]=""===c?c:c||!0}}return o.length>0&&(a.className=o.join(" ")),i[e]={tag:n,attrs:a}}(e),l,n.normalizeChildren(t)):n(e,l.key,l,t)}l.trust=function(e){return null==e&&(e=""),n("<",void 0,void 0,e,void 0,void 0)},l.fragment=function(e,t){return n("[",e.key,e,n.normalizeChildren(t),void 0,void 0)};var s=l;if((c=function(e){if(!(this instanceof c))throw Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var t=this,n=[],r=[],i=s(n,!0),o=s(r,!1),a=t._instance={resolvers:n,rejectors:r},l="function"==typeof setImmediate?setImmediate:setTimeout;function s(e,i){return function s(c){var d;try{if(!i||null==c||"object"!=typeof c&&"function"!=typeof c||"function"!=typeof(d=c.then))l(function(){i||0!==e.length||console.error("Possible unhandled promise rejection:",c);for(var t=0;e.length>t;t++)e[t](c);n.length=0,r.length=0,a.state=i,a.retry=function(){s(c)}});else{if(c===t)throw new TypeError("Promise can't be resolved w/ itself");u(d.bind(c))}}catch(e){o(e)}}}function u(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(o);try{e(n(i),r)}catch(e){r(e)}}u(e)}).prototype.then=function(e,t){var n,r,i=this._instance;function o(e,t,o,a){t.push(function(t){if("function"!=typeof e)o(t);else try{n(e(t))}catch(e){r&&r(e)}}),"function"==typeof i.retry&&a===i.state&&i.retry()}var a=new c(function(e,t){n=e,r=t});return o(e,i.resolvers,n,!0),o(t,i.rejectors,r,!1),a},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.finally=function(e){return this.then(function(t){return c.resolve(e()).then(function(){return t})},function(t){return c.resolve(e()).then(function(){return c.reject(t)})})},c.resolve=function(e){return e instanceof c?e:new c(function(t){t(e)})},c.reject=function(e){return new c(function(t,n){n(e)})},c.all=function(e){return new c(function(t,n){var r=e.length,i=0,o=[];if(0===e.length)t([]);else for(var a=0;e.length>a;a++)!function(a){function l(e){i++,o[a]=e,i===r&&t(o)}null==e[a]||"object"!=typeof e[a]&&"function"!=typeof e[a]||"function"!=typeof e[a].then?l(e[a]):e[a].then(l,n)}(a)})},c.race=function(e){return new c(function(t,n){for(var r=0;e.length>r;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=c:window.Promise.prototype.finally||(window.Promise.prototype.finally=c.prototype.finally);var c=window.Promise}else if(void 0!==e){void 0===e.Promise?e.Promise=c:e.Promise.prototype.finally||(e.Promise.prototype.finally=c.prototype.finally);c=e.Promise}var u=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var i=0;n.length>i;i++)r(e+"["+i+"]",n[i]);else if("[object Object]"===Object.prototype.toString.call(n))for(var i in n)r(e+"["+i+"]",n[i]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},d=/^file:\/\//i,f=function(e,t){var n,r=0;function i(){var e=0;function t(){0==--e&&"function"==typeof n&&n()}return function n(r){var i=r.then;return r.then=function(){e++;var o=i.apply(r,arguments);return o.then(t,function(n){if(t(),0===e)throw n}),n(o)},r}}function o(e,t){if("string"==typeof e){var n=e;null==(e=t||{}).url&&(e.url=n)}return e}function a(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],r=0;n.length>r;r++){var i=n[r].slice(1);null!=t[i]&&(e=e.replace(n[r],t[i]))}return e}function l(e,t){var n=u(t);return""!==n&&(e+=(0>e.indexOf("?")?"?":"&")+n),e}function s(e){try{return""!==e?JSON.parse(e):null}catch(t){throw Error("Invalid JSON: "+e)}}function c(e){return e.responseText}function f(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;t.length>n;n++)t[n]=new e(t[n])}return t}return{request:function(n,r){var u=i();n=o(n,r);var p=new t(function(t,r){null==n.method&&(n.method="GET"),n.method=n.method.toUpperCase();var i="GET"!==n.method&&"TRACE"!==n.method&&("boolean"!=typeof n.useBody||n.useBody);"function"!=typeof n.serialize&&(n.serialize="undefined"!=typeof FormData&&n.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof n.deserialize&&(n.deserialize=s),"function"!=typeof n.extract&&(n.extract=c),n.url=a(n.url,n.data),i?n.data=n.serialize(n.data):n.url=l(n.url,n.data);var o=new e.XMLHttpRequest,u=!1,p=o.abort;for(var m in o.abort=function(){u=!0,p.call(o)},o.open(n.method,n.url,"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),n.serialize!==JSON.stringify||!i||n.headers&&n.headers.hasOwnProperty("Content-Type")||o.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize!==s||n.headers&&n.headers.hasOwnProperty("Accept")||o.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(o.withCredentials=n.withCredentials),n.timeout&&(o.timeout=n.timeout),n.responseType&&(o.responseType=n.responseType),n.headers)({}).hasOwnProperty.call(n.headers,m)&&o.setRequestHeader(m,n.headers[m]);"function"==typeof n.config&&(o=n.config(o,n)||o),o.onreadystatechange=function(){if(!u&&4===o.readyState)try{var e=n.extract!==c?n.extract(o,n):n.deserialize(n.extract(o,n));if(n.extract!==c||o.status>=200&&300>o.status||304===o.status||d.test(n.url))t(f(n.type,e));else{var i=Error(o.responseText);i.code=o.status,i.response=e,r(i)}}catch(e){r(e)}},i&&null!=n.data?o.send(n.data):o.send()});return!0===n.background?p:u(p)},jsonp:function(n,s){var c=i();n=o(n,s);var u=new t(function(t,i){var o=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+r++,s=e.document.createElement("script");e[o]=function(r){s.parentNode.removeChild(s),t(f(n.type,r)),delete e[o]},s.onerror=function(){s.parentNode.removeChild(s),i(Error("JSONP request failed")),delete e[o]},null==n.data&&(n.data={}),n.url=a(n.url,n.data),n.data[n.callbackKey||"callback"]=o,s.src=l(n.url,n.data),e.document.documentElement.appendChild(s)});return!0===n.background?u:c(u)},setCompletionCallback:function(e){n=e}}}(window,c),p=function(e){var t,r=e.document,i={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function o(e){return e.attrs&&e.attrs.xmlns||i[e.tag]}function a(e,t){if(e.state!==t)throw Error("`vnode.state` must not be modified")}function l(e){var t=e.state;try{return this.apply(t,arguments)}finally{a(e,t)}}function s(e,t,n,r,i,o,a){for(var l=n;r>l;l++){var s=t[l];null!=s&&c(e,s,i,a,o)}}function c(e,t,i,a,u){var f=t.tag;if("string"==typeof f)switch(t.state={},null!=t.attrs&&j(t.attrs,t,i),f){case"#":!function(e,t,n){t.dom=r.createTextNode(t.children),b(e,t.dom,n)}(e,t,u);break;case"<":d(e,t,a,u);break;case"[":!function(e,t,n,i,o){var a=r.createDocumentFragment();if(null!=t.children){var l=t.children;s(a,l,0,l.length,n,null,i)}t.dom=a.firstChild,t.domSize=a.childNodes.length,b(e,a,o)}(e,t,i,a,u);break;default:!function(e,t,i,a,l){var c=t.tag,u=t.attrs,d=u&&u.is,f=(a=o(t)||a)?d?r.createElementNS(a,c,{is:d}):r.createElementNS(a,c):d?r.createElement(c,{is:d}):r.createElement(c);t.dom=f,null!=u&&function(e,t,n){for(var r in t)k(e,r,null,t[r],n)}(t,u,a);if(b(e,f,l),null!=u&&null!=u.contenteditable)g(t);else if(null!=t.text&&(""!==t.text?f.textContent=t.text:t.children=[n("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children){var p=t.children;s(f,p,0,p.length,i,null,a),"select"===t.tag&&null!=u&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&k(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,u)}}(e,t,i,a,u)}else!function(e,t,r,i,o){(function(e,t){var r;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(r=e.state.view).$$reentrantLock$$)return;r.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(r=e.tag).$$reentrantLock$$)return;r.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(null!=e.attrs&&j(e.attrs,e,t),j(e.state,e,t),e.instance=n.normalize(l.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null})(t,r),null!=t.instance?(c(e,t.instance,r,i,o),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,i,a,u)}var u={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(e,t,n,i){var o=t.children.match(/^\s*?<(\w+)/im)||[],a=r.createElement(u[o[1]]||"div");"http://www.w3.org/2000/svg"===n?(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",a=a.firstChild):a.innerHTML=t.children,t.dom=a.firstChild,t.domSize=a.childNodes.length;for(var l,s=r.createDocumentFragment();l=a.firstChild;)s.appendChild(l);b(e,s,i)}function f(e,t,n,r,i,o){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)s(e,n,0,n.length,r,i,o);else if(null==n||0===n.length)y(t,0,t.length);else{for(var a=0,l=0,u=null,d=null;t.length>l;l++)if(null!=t[l]){u=null!=t[l].key;break}for(;n.length>a;a++)if(null!=n[a]){d=null!=n[a].key;break}if(null===d&&null==u)return;if(u!==d)y(t,l,t.length),s(e,n,a,n.length,r,i,o);else if(d){for(var f,g,k,x,_,$=t.length-1,q=n.length-1;$>=l&&q>=a;)if(x=n[q],null==(k=t[$]))$--;else if(null==x)q--;else{if(k.key!==x.key)break;k!==x&&p(e,k,x,r,i,o),null!=x.dom&&(i=x.dom),$--,q--}for(;$>=l&&q>=a;)if(g=n[a],null==(f=t[l]))l++;else if(null==g)a++;else{if(f.key!==g.key)break;l++,a++,f!==g&&p(e,f,g,r,v(t,l,i),o)}for(;$>=l&&q>=a;){if(null==f)l++;else if(null==g)a++;else if(null==k)$--;else if(null==x)q--;else{if(a===q)break;if(f.key!==x.key||k.key!==g.key)break;_=v(t,l,i),b(e,h(k),_),k!==g&&p(e,k,g,r,_,o),++a>--q||b(e,h(f),i),f!==x&&p(e,f,x,r,i,o),null!=x.dom&&(i=x.dom),l++,$--}k=t[$],x=n[q],f=t[l],g=n[a]}for(;$>=l&&q>=a;){if(null==k)$--;else if(null==x)q--;else{if(k.key!==x.key)break;k!==x&&p(e,k,x,r,i,o),null!=x.dom&&(i=x.dom),$--,q--}k=t[$],x=n[q]}if(a>q)y(t,l,$+1);else if(l>$)s(e,n,a,q+1,r,i,o);else{var S,O,j=i,A=q-a+1,C=Array(A),z=0,E=0,T=2147483647,P=0;for(E=0;A>E;E++)C[E]=-1;for(E=q;E>=a;E--)if(null==S&&(S=m(t,l,$+1)),null!=(x=n[E])){var R=S[x.key];null!=R&&(T=T>R?R:-1,C[E-a]=R,k=t[R],t[R]=null,k!==x&&p(e,k,x,r,i,o),null!=x.dom&&(i=x.dom),P++)}if(i=j,P!==$-l+1&&y(t,l,$+1),0===P)s(e,n,a,q+1,r,i,o);else if(-1===T)for(z=(O=function(e){var t,n,r=e.slice(),i=[];i.push(0);for(var o=0,a=e.length;a>o;++o)if(-1!==e[o]){var l=i[i.length-1];if(e[l]<e[o])r[o]=l,i.push(o);else{for(t=0,n=i.length-1;n>t;){var s=(t+n)/2|0;e[o]>e[i[s]]?t=s+1:n=s}e[i[t]]>e[o]&&(t>0&&(r[o]=i[t-1]),i[t]=o)}}n=i[(t=i.length)-1];for(;t-- >0;)i[t]=n,n=r[n];return i}(C)).length-1,E=q;E>=a;E--)g=n[E],-1===C[E-a]?c(e,g,r,o,i):O[z]===E-a?z--:b(e,h(g),i),null!=g.dom&&(i=n[E].dom);else for(E=q;E>=a;E--)g=n[E],-1===C[E-a]&&c(e,g,r,o,i),null!=g.dom&&(i=n[E].dom)}}else{var N=n.length>t.length?t.length:n.length;for(a=l>a?a:l;N>a;a++)(f=t[a])===(g=n[a])||null==f&&null==g||(null==f?c(e,g,r,o,v(t,a+1,i)):null==g?w(f):p(e,f,g,r,v(t,a+1,i),o));t.length>N&&y(t,a,t.length),n.length>N&&s(e,n,a,n.length,r,i,o)}}}function p(e,t,r,i,a,s){var u=t.tag;if(u===r.tag){if(r.state=t.state,r.events=t.events,function(e,t){var n,r;null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=l.call(e.attrs.onbeforeupdate,e,t));"string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate&&(r=l.call(e.state.onbeforeupdate,e,t));if(!(void 0===n&&void 0===r||n||r))return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0;return!1}(r,t))return;if("string"==typeof u)switch(null!=r.attrs&&A(r.attrs,r,i),u){case"#":!function(e,t){""+e.children!=""+t.children&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,r);break;case"<":!function(e,t,n,r,i){t.children!==n.children?(h(t),d(e,n,r,i)):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,r,s,a);break;case"[":!function(e,t,n,r,i,o){f(e,t.children,n.children,r,i,o);var a=0,l=n.children;if(n.dom=null,null!=l){for(var s=0;l.length>s;s++){var c=l[s];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),a+=c.domSize||1)}1!==a&&(n.domSize=a)}}(e,t,r,i,a,s);break;default:!function(e,t,r,i){var a=t.dom=e.dom;i=o(t)||i,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0));(function(e,t,n,r){if(null!=n)for(var i in n)k(e,i,t&&t[i],n[i],r);var o;if(null!=t)for(var i in t)null==(o=t[i])||null!=n&&null!=n[i]||x(e,i,o,r)})(t,e.attrs,t.attrs,i),null!=t.attrs&&null!=t.attrs.contenteditable?g(t):null!=e.text&&null!=t.text&&""!==t.text?""+e.text!=""+t.text&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[n("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[n("#",void 0,void 0,t.text,void 0,void 0)]),f(a,e.children,t.children,r,null,i))}(t,r,i,s)}else!function(e,t,r,i,o,a){if(r.instance=n.normalize(l.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");null!=r.attrs&&A(r.attrs,r,i);A(r.state,r,i),null!=r.instance?(null==t.instance?c(e,r.instance,i,a,o):p(e,t.instance,r.instance,i,o,a),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=t.instance?(w(t.instance),r.dom=void 0,r.domSize=0):(r.dom=t.dom,r.domSize=t.domSize)}(e,t,r,i,a,s)}else w(t),c(e,r,i,s,a)}function m(e,t,n){for(var r=Object.create(null);n>t;t++){var i=e[t];if(null!=i){var o=i.key;null!=o&&(r[o]=t)}}return r}function h(e){var t=e.domSize;if(null!=t||null==e.dom){var n=r.createDocumentFragment();if(t>0){for(var i=e.dom;--t;)n.appendChild(i.nextSibling);n.insertBefore(i,n.firstChild)}return n}return e.dom}function v(e,t,n){for(;e.length>t;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function b(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function g(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw Error("Child node of a contenteditable must be trusted")}function y(e,t,n){for(var r=t;n>r;r++){var i=e[r];null!=i&&w(i)}}function w(e){var t,n=1,r=0,i=e.state;e.attrs&&"function"==typeof e.attrs.onbeforeremove&&(null!=(t=l.call(e.attrs.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(o,o)));"string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&(null!=(t=l.call(e.state.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(o,o)));function o(){if(++r===n&&(a(e,i),function e(t){t.attrs&&"function"==typeof t.attrs.onremove&&l.call(t.attrs.onremove,t);if("string"!=typeof t.tag)"function"==typeof t.state.onremove&&l.call(t.state.onremove,t),null!=t.instance&&e(t.instance);else{var n=t.children;if(Array.isArray(n))for(var r=0;n.length>r;r++){var i=n[r];null!=i&&e(i)}}}(e),e.dom)){for(var t=e.dom.parentNode,o=e.domSize||1;--o;)t.removeChild(e.dom.nextSibling);t.removeChild(e.dom)}}o()}function k(e,t,n,i,o){if("key"!==t&&"is"!==t&&null!=i&&!_(t)&&(n!==i||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===r.activeElement||"option"===e.tag&&e.dom.parentNode===r.activeElement}(e,t)||"object"==typeof i)){if("o"===t[0]&&"n"===t[1])return O(e,t,i);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),i);else if("style"===t)q(e.dom,n,i);else if($(e,t,o)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+i&&e.dom===r.activeElement)return;if("select"===e.tag&&null!==n&&e.dom.value===""+i)return;if("option"===e.tag&&null!==n&&e.dom.value===""+i)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,i):e.dom[t]=i}else"boolean"==typeof i?i?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,i)}}function x(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!_(t))if("o"!==t[0]||"n"!==t[1]||_(t))if("style"===t)q(e.dom,n,null);else if(!$(e,t,r)||"className"===t||"option"===e.tag&&"value"===t||"input"===e.tag&&"type"===t){var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else O(e,t,void 0)}function _(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function $(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}function q(e,t,n){if(null==t||null==n||"object"!=typeof t||"object"!=typeof n||n===t)if(t===n&&(e.style.cssText="",t=null),null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else for(var r in"string"==typeof t&&(e.style.cssText=""),n)e.style[r]=n[r];else{for(var r in n)n[r]!==t[r]&&(e.style[r]=n[r]);for(var r in t)r in n||(e.style[r]="")}}function S(){}function O(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(e.events=new S,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function j(e,t,n){"function"==typeof e.oninit&&l.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(l.bind(e.oncreate,t))}function A(e,t,n){"function"==typeof e.onupdate&&n.push(l.bind(e.onupdate,t))}return(S.prototype=Object.create(null)).handleEvent=function(e){var n,r=this["on"+e.type];"function"==typeof r?n=r.call(e.target,e):"function"==typeof r.handleEvent&&r.handleEvent(e),"function"==typeof t&&t.call(e.target,e),!1===n&&(e.preventDefault(),e.stopPropagation())},{render:function(e,t){if(!e)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],o=r.activeElement,a=e.namespaceURI;null==e.vnodes&&(e.textContent=""),Array.isArray(t)||(t=[t]),f(e,e.vnodes,n.normalizeChildren(t),i,null,"http://www.w3.org/1999/xhtml"===a?void 0:a),e.vnodes=t,null!=o&&r.activeElement!==o&&"function"==typeof o.focus&&o.focus();for(var l=0;i.length>l;l++)i[l]()},setEventCallback:function(e){return t=e}}};var m=function(e,t){var n=p(e);n.setEventCallback(function(e){!1===e.redraw?e.redraw=void 0:l()});var r=[],i=!1;function o(e){var t=r.indexOf(e);t>-1&&r.splice(t,2)}function a(){if(i)throw Error("Nested m.redraw.sync() call");i=!0;for(var e=1;r.length>e;e+=2)try{r[e]()}catch(e){void 0!==console&&console.error(e)}i=!1}var l=(t||function(e){var t=0,n=null,r="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var i=Date.now()-t;null===n&&(n=r(function(){n=null,e(),t=Date.now()},16-i))}})(a);return l.sync=a,{subscribe:function(e,t){o(e),r.push(e,t)},unsubscribe:o,redraw:l,render:n.render}}(window);f.setCompletionCallback(m.redraw);var h;s.mount=(h=m,function(e,t){if(null===t)return h.render(e,[]),void h.unsubscribe(e);if(null==t.view&&"function"!=typeof t)throw Error("m.mount(element, component) expects a component, not a vnode");var r=function(){h.render(e,n(t))};h.subscribe(e,r),r()});var v=c,b=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},i=0;t.length>i;i++){var o=t[i].split("="),a=decodeURIComponent(o[0]),l=2===o.length?decodeURIComponent(o[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var s=a.split(/\]\[?|\[/),c=n;a.indexOf("[")>-1&&s.pop();for(var u=0;s.length>u;u++){var d=s[u],f=s[u+1],p=""==f||!isNaN(parseInt(f,10)),m=u===s.length-1;if(""===d)null==r[a=s.slice(0,u).join()]&&(r[a]=0),d=r[a]++;null==c[d]&&(c[d]=m?l:p?[]:{}),c=c[d]}}return n},g=function(e){var t,n="function"==typeof e.history.pushState,r="function"==typeof setImmediate?setImmediate:setTimeout;function i(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function o(e,t,n){var r=e.indexOf("?"),i=e.indexOf("#"),o=r>-1?r:i>-1?i:e.length;if(r>-1){var a=b(e.slice(r+1,i>-1?i:e.length));for(var l in a)t[l]=a[l]}if(i>-1){var s=b(e.slice(i+1));for(var l in s)n[l]=s[l]}return e.slice(0,o)}var a={prefix:"#!",getPath:function(){switch(a.prefix.charAt(0)){case"#":return i("hash").slice(a.prefix.length);case"?":return i("search").slice(a.prefix.length)+i("hash");default:return i("pathname").slice(a.prefix.length)+i("search")+i("hash")}},setPath:function(t,r,i){var l={},s={};if(t=o(t,l,s),null!=r){for(var c in r)l[c]=r[c];t=t.replace(/:([^\/]+)/g,function(e,t){return delete l[t],r[t]})}var d=u(l);d&&(t+="?"+d);var f=u(s);if(f&&(t+="#"+f),n){var p=i?i.state:null,m=i?i.title:null;e.onpopstate(),i&&i.replace?e.history.replaceState(p,m,a.prefix+t):e.history.pushState(p,m,a.prefix+t)}else e.location.href=a.prefix+t}};return a.defineRoutes=function(i,l,s){function c(){var t=a.getPath(),n={},r=o(t,n,n),c=e.history.state;if(null!=c)for(var u in c)n[u]=c[u];for(var d in i){var f=RegExp("^"+d.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(f.test(r))return void r.replace(f,function(){for(var e=d.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),o=0;e.length>o;o++)n[e[o].replace(/:|\./g,"")]=decodeURIComponent(r[o]);l(i[d],n,t,d)})}s(t,n)}var u;n?e.onpopstate=(u=c,function(){null==t&&(t=r(function(){t=null,u()}))}):"#"===a.prefix.charAt(0)&&(e.onhashchange=c),c()},a};s.route=function(e,t){var r,i,o,a,l,s=g(e),c=function(e,c,u){if(null==e)throw Error("Ensure the DOM element that was passed to `m.route` is not undefined");function d(){null!=r&&t.render(e,r(n(i,o.key,o)))}var f=function(){d(),f=t.redraw};t.subscribe(e,d);var p=function(e){if(e===c)throw Error("Could not resolve default route "+c);s.setPath(c,null,{replace:!0})};s.defineRoutes(u,function(e,t,n){var s=l=function(e,c){s===l&&(i=null==c||"function"!=typeof c.view&&"function"!=typeof c?"div":c,o=t,a=n,l=null,r=(e.render||function(e){return e}).bind(e),f())};e.view||"function"==typeof e?s({},e):e.onmatch?v.resolve(e.onmatch(t,n)).then(function(t){s(e,t)},p):s(e,"div")},p)};c.set=function(e,t,n){null!=l&&((n=n||{}).replace=!0),l=null,s.setPath(e,t,n)},c.get=function(){return a},c.prefix=function(e){s.prefix=e};var u=function(e,t){t.dom.setAttribute("href",s.prefix+t.attrs.href),t.dom.onclick=function(t){if(!(t.ctrlKey||t.metaKey||t.shiftKey||2===t.which)){t.preventDefault(),t.redraw=!1;var n=this.getAttribute("href");0===n.indexOf(s.prefix)&&(n=n.slice(s.prefix.length)),c.set(n,void 0,e)}}};return c.link=function(e){return null==e.tag?u.bind(u,e):u({},e)},c.param=function(e){return void 0!==o&&void 0!==e?o[e]:o},c}(window,m),s.withAttr=function(e,t,n){return function(r){t.call(n||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}};var y=p(window);s.render=y.render,s.redraw=m.redraw,s.request=f.request,s.jsonp=f.jsonp,s.parseQueryString=b,s.buildQueryString=u,s.version="2.0.0-rc.0",s.vnode=n,s.PromisePolyfill=c,t.exports=s}()}(t={exports:{}},t.exports),t.exports);const r=e=>JSON.parse(JSON.stringify(e)),i=(e,t,n)=>"http://private.omdbapi.com/?"+e+"="+t+"&apikey="+n,o=e=>{const t=[...new Set(e.list.map(e=>e.disk))].sort((e,t)=>e-t);e.filters.disk=[...["Disk"],...t],e.filters.disk.includes(e.filter.disk)||(e.filter.disk="Disk")},a=(e,t)=>{e.modal={type:"error",content:{text:t}}};var l={ai:"alignItems",b:"bottom",bc:"backgroundColor",br:"borderRadius",bs:"boxShadow",bi:"backgroundImage",c:"color",d:"display",f:"float",fd:"flexDirection",ff:"fontFamily",fs:"fontSize",h:"height",jc:"justifyContent",l:"left",lh:"lineHeight",ls:"letterSpacing",m:"margin",mb:"marginBottom",ml:"marginLeft",mr:"marginRight",mt:"marginTop",o:"opacity",p:"padding",pb:"paddingBottom",pl:"paddingLeft",pr:"paddingRight",pt:"paddingTop",r:"right",t:"top",ta:"textAlign",td:"textDecoration",tt:"textTransform",w:"width"},s=["float"].concat(Object.keys("undefined"==typeof document?{}:function e(t){return t?t.hasOwnProperty("width")?t:e(Object.getPrototypeOf(t)):{}}(document.documentElement.style)).filter(function(e){return-1===e.indexOf("-")&&"length"!==e}));var c=/^-?-?[a-z][a-z-_0-9]*$/i,u=function(e,t){return void 0===t&&(t={}),function(n){return n in t?t[n]:t[n]=e(n)}};function d(e,t,n){t in e?d(e,"!"+t,n):e[t]=function e(t,n){return Array.isArray(n)?n.map(function(e){return k(t,e)}).join(" "):"string"==typeof n?e(t,n.split(" ")):k(t,n)}(t,n)}var f=Object.create(null,{}),p=Object.create(null,{}),m=/^(o|O|ms|MS|Ms|moz|Moz|webkit|Webkit|WebKit)([A-Z])/,h=u(function(e){var t=document.createElement("div");try{return t.style[e]="1px",t.style.setProperty(e,"1px"),"1px"===t.style[e].slice(-3)?"px":""}catch(e){return""}},{flex:"",boxShadow:"px",border:"px",borderTop:"px",borderRight:"px",borderBottom:"px",borderLeft:"px"});function v(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function b(e){return e.slice("-"===e.charAt(0)?1:0).replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function g(e,t,n,r){void 0===n&&(n="");var i={},o=n.indexOf("&")>-1&&-1===n.indexOf(",")?"":"&",a=[];return Object.keys(e).forEach(function(o){"@"===o.charAt(0)?a.push(o+"{"+g(e[o],t,n,r)+"}"):"object"==typeof e[o]?a=a.concat(g(e[o],t,n+o,r)):i[o]=e[o]}),Object.keys(i).length&&a.unshift(((r||" "===n.charAt(0)?"":"&")+o+n).replace(/&/g,t).trim()+"{"+w(i)+"}"),a}var y=/,(?=(?:(?:[^"]*"){2})*[^"]*$)/;function w(e){return Object.keys(e).reduce(function(t,n){return t+function(e,t){return(m.test(e=e in f?f[e]:e)?"-":"")+(x(e)?e:(n=e,n.replace(/(\B[A-Z])/g,"-$1").toLowerCase()))+":"+t+";";var n}(n.replace(/!/g,""),e[n])},"")}function k(e,t){return t in p?p[t]:t+(isNaN(t)||null===t||"boolean"==typeof t||x(e)?"":h(e))}function x(e){return"-"===e.charAt(0)&&"-"===e.charAt(1)}var _="b"+("000"+(46656*Math.random()|0).toString(36)).slice(-3)+("000"+(46656*Math.random()|0).toString(36)).slice(-3),$="object"==typeof document&&document.createElement("style");$&&document.head&&document.head.appendChild($),$&&($.id=_);var q=$&&$.sheet,S=!1,O=Object.create(null,{}),j=[],A=0;function C(e,t){if(j.push(e),S)return $.textContent=j.join("\n");try{q&&q.insertRule(e,arguments.length>1?t:q.cssRules.length)}catch(e){}}var z=Object.create(null);function E(e,t){var n=P(E);return e&&v(n.__style,Y.apply(null,arguments)),n}function T(e,t){Object.defineProperty(E,e,{configurable:!0,value:t})}function P(e){var t=Object.create(E,{__style:{value:v({},e.__style)},style:{enumerable:!0,get:function(){var e=this;return Object.keys(this.__style).reduce(function(t,n){return"number"!=typeof e.__style[n]&&"string"!=typeof e.__style[n]||(t[n.replace(/^!/,"")]=e.__style[n]),t},{})}}});return e===E&&(E.__style={}),t}function R(e,t,n){e[t.split(y).map(function(e){return(":"===(e=e.trim()).charAt(0)||"["===e.charAt(0)?"":" ")+e}).join(",&")]=Y(n)}function N(e){return function(t){var n=P(this);return t||0===t?arguments.length>0&&d(n.__style,e,Array.prototype.slice.call(arguments)):delete n.__style[e],n}}function D(e,t){g(Y(t),e,"",!0).forEach(function(e){return C(e)})}function I(e,t){if(1===arguments.length)return Object.keys(e).forEach(function(t){return I(t,e[t])});delete E[e],"function"==typeof t?(I[e]=t,Object.defineProperty(E,e,{configurable:!0,value:function(e){var n=P(this),r=U(e)?t(B(e,arguments)):t.apply(null,arguments);return v(n.__style,r.__style),n}})):(I[e]=Y(t),Object.defineProperty(E,e,{configurable:!0,get:function(){var e=P(this);return v(e.__style,Y(t)),e}}))}function L(e){var t,n=(t=e).charAt(0)+(t.match(/([A-Z])/g)||[]).join("").toLowerCase(),r=l[n]&&l[n]!==e?e:n;return z[r]=e,r}Object.defineProperties(E,{__style:{configurable:!0,writable:!0,value:{}},valueOf:{configurable:!0,writable:!0,value:function(){return"."+this.class}},toString:{configurable:!0,writable:!0,value:function(){return this.class}}}),T("setDebug",function(e){S=e}),T("$keyframes",function(e){var t=Object.keys(e).reduce(function(t,n){return t+n+"{"+w(Y(e[n]))+"}"},"");if(t in H)return H[t];var n=_+F++;return H[t]=n,C("@keyframes "+n+"{"+t+"}"),n}),T("$media",function(e,t){var n=P(this);e&&(n.__style["@media "+e]=Y(t));return n}),T("$import",function(e){e&&!/^('|"|url\('|url\(")/.test(e)&&(e='"'+e+'"');e&&C("@import "+e+";",0);return P(this)}),T("$nest",function(e,t){var n=P(this);1===arguments.length?Object.keys(e).forEach(function(t){return R(n.__style,t,e[t])}):e&&R(n.__style,e,t);return n}),T("getSheet",function(){var e=j.join("");return j=[],O=Object.create(null,{}),A=0,e}),T("getRules",function(){return j}),T("helper",I),T("css",function(e,t){1===arguments.length?Object.keys(e).forEach(function(t){return D(t,e[t])}):D(e,t);return P(this)}),T("classPrefix",_),s.forEach(function(e){var t,n=e.match(m);if(n){var r=(t=e.replace(m,"$2")).charAt(0).toLowerCase()+t.slice(1);if(-1===s.indexOf(r))return"flexDirection"===r&&(p.flex="-"+n[1].toLowerCase()+"-flex"),f[r]=e,T(r,N(e)),void T(L(r),E[r])}T(e,N(e)),T(L(e),E[e])}),T("content",function(e){var t=P(this);return null===e||void 0===e||!1===e?delete t.__style.content:t.__style.content='"'+e+'"',t}),Object.defineProperty(E,"class",{set:function(e){this.__class=e},get:function(){return this.__class||function(e){var t=JSON.stringify(e);if(t in O)return O[t];for(var n=_+ ++A,r=g(e,"."+n),i=0;r.length>i;i++)C(r[i]);return O[t]=n,n}(this.__style)}}),[":active",":any",":checked",":default",":disabled",":empty",":enabled",":first",":first-child",":first-of-type",":fullscreen",":focus",":hover",":indeterminate",":in-range",":invalid",":last-child",":last-of-type",":left",":link",":only-child",":only-of-type",":optional",":out-of-range",":read-only",":read-write",":required",":right",":root",":scope",":target",":valid",":visited",":dir",":lang",":not",":nth-child",":nth-last-child",":nth-last-of-type",":nth-of-type","::after","::before","::first-letter","::first-line","::selection","::backdrop","::placeholder","::marker","::spelling-error","::grammar-error"].forEach(function(e){return T("$"+b(e.replace(/:/g,"")),function(t,n){var r=P(this);return U(t)?r.__style[e]=Y.apply(null,arguments):(t||n)&&(r.__style[e+(n?"("+t+")":"")]=Y(n||t)),r})}),E.helper("$animate",function(e,t){return E.animation(E.$keyframes(t)+" "+e)});var M=u(function(e){var t,n="";return e.trim().replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*/g,"").split(/;|\n/).reduce(function(e,r){if(!r)return e;var i=(r=n+r.trim()).replace(/[ :]+/," ").split(" "),o=i[0],a=i.slice(1);if(n=","===r.charAt(r.length-1)?r:"")return e;if(","===r.charAt(0)||!c.test(o))return e[t]+=" "+r,e;if(!o)return e;var l="-"===o.charAt(0)&&"-"===o.charAt(1)?o:b(o);return t=z[l]||l,l in I?v(e,"function"==typeof I[l]?I[l].apply(I,a).__style:I[l]):a.length>0&&d(e,t,a),e},{})}),F=0,H={};function Y(e,t){var n;return"string"==typeof e?"string"==typeof t||"number"==typeof t?((n={})[e]=t,n):M(e):U(e)?M(B(e,arguments)):e.__style||function e(t){return Object.keys(t).reduce(function(n,r){var i=t[r];return r=z[r]||r,i||0===i||""===i?("content"===r&&'"'!==i.charAt(0)?n[r]='"'+i+'"':"object"==typeof i?n[r]=e(i):d(n,r,i),n):n},{})}(e)}function U(e){return Array.isArray(e)&&"string"==typeof e[0]}function B(e,t){for(var n="",r=0;e.length>r;r++)n+=e[r]+(t[r+1]||"");return n}const W=(e,t)=>n("label"+E.db.pointer.us("none"),n("input"+E.dn.$nest(":checked ~ div",E.bc("#fff")).$nest(":checked ~ div:after",E.db),{type:"checkbox",checked:e,onchange:t}),n("div"+E.size(18).bc("#f5f5f5").bo("1px solid #d2d2d2").$hover(E.bo("1px solid #616161")).$after(E.dn.rel.content("").pos(5,-4).size(6,15).bo("solid #008000").borderWidth(0,3.4,3.4,0).transform("rotate(35deg)")))),G=(e,t)=>n("div"+E.tal,n("div"+E.h(36).pl(36).mb(36).bb("1px solid #d2d2d2"),n("span",n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="list"},"home")),n("span","info"===e.page?n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="edit"},"edit"):n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="info"},"visibility")),n("span",n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#ed2024")),{onclick:()=>e.modal={type:"delok",content:{text:`Delete ${e.movie.title}?`,click:()=>t.del(!0)}}},"delete")),n("span","info"===e.page?n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="add"},"add"):n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>t.put().then(()=>{e.page="info"})},"save"))),n("div"+E.dg.gtc("67%","33%").gtr("auto").gta("'info poster'").ofy("auto").h("calc(100vh - 217px)"),n("div"+E.ga("info").bsi.p(0,36),"info"===e.page&&((e,t)=>n("div",n("h1",e.movie.year?`${e.movie.title} (${e.movie.year})`:e.movie.title),["plot","director","writer","cast"].map(t=>n("div",{class:"writer"===t?null:E.mb(12).class},"plot"===t?n("div"+E.fw("bold"),"plot:"):n("b"+E.mr(6),`${t}: `),n("span",e.movie[t]))),n("div"+E.dg.gtc("50%","50%").gtr("auto").gta("'left right'"),n("div"+E.ga("left"),["country","language","originaltitle","runtime","genre","type"].map(r=>n("div",n("b"+E.mr(6),"originaltitle"===r?"original title: ":`${r}: `),n("span","runtime"===r?t.mm2hm(e.movie.runtime):e.movie[r])))),n("div"+E.ga("right"),["rating","metascore","imdb","disk","seen","notes"].map(t=>n("div",n("b"+E.mr(6),`${t}: `),"imdb"===t?n("a",{href:`https://www.imdb.com/title/${e.movie.imdbid}`,target:"_blank"},`https://www.imdb.com/title/${e.movie.imdbid}`):"seen"===t?e.movie.seen?n("img"+E.va(-2),{src:"images/checkmark-16.png"}):n("img"+E.va(-4),{src:"images/xmark-16.png"}):n("span",e.movie[t])))))))(e,t),"edit"===e.page&&(e=>n("div"+E.bsi.p(36,36,0,0),n("div"+E.mb(20),n("label"+E.dib.w(120).fw("bold"),"title"),n("input"+E.bsi.size(460,32),{oninput:t=>e.movie.title=t.target.value,value:e.movie.title})),n("div"+E.mb(20),n("label"+E.dib.w(120).fw("bold"),"original title"),n("input"+E.bsi.size(460,32),{oninput:t=>e.movie.originaltitle=t.target.value,value:e.movie.originaltitle})),n("div"+E.mb(20),n("label"+E.dib.w(120).fw("bold").va("top").mt(8),"notes"),n("textarea"+E.dib.bsi.size(460,64).p(8,8,8,14).ff("Open Sans").fs(14).c("#616161").resize("none").ofy("auto"),{oninput:t=>e.movie.notes=t.target.value,value:e.movie.notes})),n("div"+E.mb(20),n("label"+E.dib.w(120).fw("bold"),"disk"),n("input"+E.bsi.size(32,32).pl(0).tac,{oninput:t=>e.movie.disk=t.target.value,value:e.movie.disk})),n("div",n("label"+E.dib.w(120).fw("bold"),"seen"),n("span"+E.dib.va(-4),W(e.movie.seen,()=>e.movie.seen=!e.movie.seen)))))(e),n("div","info"===e.page&&"series"===e.movie.type?((e,t)=>n("div"+E.dg.gtc("50%","50%").gtr("auto").gta("'left right'").mt(24),n("div"+E.ga("left"),n("table"+E.coll,n("thead",n("th"+E.dib.w(95).fw("bold").pt(4),"seasons:"),n("th"+E.p(4,16,4,1),"O"),n("th"+E.p(4,16,4,1),"S")),n("tbody"+E.$nest("td",E.p(4,16,4,0)),e.movie.seasonsowned.map((r,i)=>[n("tr",n("td"+E.pl(1),n("a",{onclick:()=>t.geteps(i+1)},"season "+(i+1))),n("td",n("span",n("img"+E.va(-2),r?{src:"images/checkmark-16.png"}:{src:"images/xmark-16.png"}))),n("td",n("span",n("img"+E.va(-2),e.movie.seasonsseen[i]?{src:"images/checkmark-16.png"}:{src:"images/xmark-16.png"}))))])))),e.season>0&&n("div"+E.ga("right"),n("table",n("thead"+E.$nest("th",E.p(4,16,4,1)),n("th"),n("th","Season "+e.season)),n("tbody"+E.$nest("td",E.p(4,16,4,0)),e.eps.Episodes.map(e=>[n("tr",n("td",e.Episode+"."),n("td",n("a",{href:"https://www.imdb.com/title/"+e.imdbID,target:"_blank"},e.Title)))]))))))(e,t):"edit"===e.page&&"series"===e.movie.type?(e=>n("div"+E.m(36,36,24,0),n("table"+E.coll,n("thead",n("th"+E.dib.w(95).fw("bold").pt(4),"seasons:"),n("th"+E.p(4,16,4,5),"O"),n("th"+E.p(4,16,4,5),"S")),n("tbody"+E.$nest("td",E.p(4,16,4,0)),e.movie.seasonsowned.map((t,r)=>[n("tr",n("td"+E.dib.w(97).pl(1),"season "+(r+1)),n("td",n("span"+E.dib.va(-4),W(e.movie.seasonsowned[r],()=>e.movie.seasonsowned[r]=!e.movie.seasonsowned[r]))),n("td",n("span"+E.dib.va(-4),W(e.movie.seasonsseen[r],()=>e.movie.seasonsseen[r]=!e.movie.seasonsseen[r]))))])))))(e):null)),n("div"+E.ga("poster").tac.pt(20),n("img"+E.bs("0px 1px 5px 1px rgba(0,0,0,0.5)"),{src:e.movie.poster})))),J=(e,t)=>n("div"+E.ofy("auto").h("calc(100vh - 242px)"),n("div"+E.bsi.p(0,36),n("div"+E.dg.gtc("50%","50%").gtr("auto").gta("'left right'"),n("div"+E.ga("left"),n("h2",e.qone.Year?`${e.qone.Title} (${e.qone.Year})`:e.qone.Title),["Plot","Director","Writer","Cast"].map(t=>n("div"+E.mb(12),"Plot"===t?n("div"+E.fw("bold"),"plot:"):n("b"+E.mr(6),`${t.toLowerCase()}: `),n("span","Cast"===t?e.qone.Actors:e.qone[t]))),["Country","Language","Runtime","Genre","Type"].map(r=>n("div",{class:"Genre"===r?E.mb(12).class:null},n("b"+E.mr(6),`${r.toLowerCase()}: `),n("span","Runtime"===r?t.mm2hm(e.qone.Runtime.split(" ")[0]||0):e.qone[r]))),["Rating","Metascore","imdb"].map(t=>n("div",n("b"+E.mr(6),`${t.toLowerCase()}: `),"imdb"===t?n("a",{href:`https://www.imdb.com/title/${e.qone.imdbID}`,target:"_blank"},`https://www.imdb.com/title/${e.qone.imdbID}`):n("span","Rating"===t?e.qone.imdbRating:e.qone[t]))),n("div","series"===e.qone.Type&&(e=>n("div"+E.m(18,36,24,0),n("table"+E.coll,n("thead",n("th"+E.dib.w(95).pt(4),"seasons:"),n("th"+E.p(4,16,4,4),"O"),n("th"+E.p(4,16,4,5),"S")),n("tbody"+E.$nest("td",E.p(4,16,4,0)),[...Array(+e.qone.totalSeasons).keys()].map(t=>n("tr",n("td"+E.dib.w(97).pl(1),"season "+(t+1)),n("td",n("span"+E.dib.va(-4),W(e.qone.seasonsowned[t],()=>e.qone.seasonsowned[t]=!e.qone.seasonsowned[t]))),n("td",n("span"+E.dib.va(-4),W(e.qone.seasonsseen[t],()=>e.qone.seasonsseen[t]=!e.qone.seasonsseen[t])))))))))(e))),n("div"+E.ga("right"),n("div"+E.tar.mt(20),n("img"+E.bs("0px 1px 5px 1px rgba(0,0,0,0.5)"),{src:e.qone.Poster}),n("div"+E.tal.m(24,0,0,68),n("label"+E.dib.w(60).fw("bold"),"disk"),n("input"+E.bsi.size(32,32).pl(0).tac,{oninput:t=>e.qone.disk=t.target.value,value:e.qone.disk}),n("span"+E.f("right").m(10,24,0,0),n("a.material-icons"+E.fs(48).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>t.post()},"save"))),n("div"+E.tal.m(10,0,0,68),n("label"+E.dib.w(60).fw("bold"),"seen"),n("span"+E.dib.va(-4),W(e.qone.seen,()=>e.qone.seen=!e.qone.seen)))))))),K=(e,t)=>n("div"+E.tal,n("div"+E.h(36).pl(36).mb(24).bb("1px solid #d2d2d2"),n("span",n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="list"},"home"))),n("span"+E.rel,n("input"+E.bsi.size(300,36).ml(36).pl(40).bo("1px solid #d2d2d2").fs(13),{placeholder:"Search title...",onfocus:()=>{e.show="",e.qres={},e.qone={}},oninput:t=>e.find=t.target.value,onkeyup:t=>{e.find=t.target.value,13===t.keyCode&&t.target.blur()},onblur:n=>{n.target.value&&(e.show="searching",t.query())},value:e.find}),n("span.material-icons"+E.abs.pos(42,-1).c("#acacac"),"search"),n("span.material-icons"+E.abs.pos(305,-2).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.find=""},"close")),n("div"+E.dg.gtc("50%","50%").gtr("auto").gta("'left right'"),n("div"+E.ga("left"),"one"===e.show?J(e,t):"list"===e.show?((e,t)=>n("div"+E.p(0,36).ofy("auto").h("calc(100vh - 242px)"),n("h4",`Found: ${e.qres.totalResults}`,n("span"+E.ml(10>10*(+e.qpage-1)+1?108:100),10*(+e.qpage-1)+1+" - "+(10*+e.qpage>e.qres.totalResults?e.qres.totalResults:10*+e.qpage)),n("span"+E.ml(100),n("span.material-icons"+E.mr(20).va(-7).us("none").visibility(t.isporn("prev")?"visible":"hidden").$hover(E.c("#349cfb").pointer),{onclick:()=>{t.isporn("prev")&&t.querypage("prev")}},"keyboard_arrow_left"),n("span.material-icons"+E.va(-7).us("none").visibility(t.isporn("next")?"visible":"hidden").$hover(E.c("#349cfb").pointer),{onclick:()=>{t.isporn("next")&&t.querypage("next")}},"keyboard_arrow_right"))),n("div",e.qres.Search.map((r,i)=>n("div"+E.bsi.h(24).lh(24).mb(5).c(e.qres.Search[i].imdbID===e.qone.imdbID?"#349cfb":null).$hover(e.qres.Search[i].imdbID===e.qone.imdbID?E.default:E.c("#349cfb").pointer),{onclick:()=>t.queryid(e.qres.Search[i].imdbID)},n("span"+E.mr(8).ml(9>i?8:0),`${i+1}.`),n("span",r.Title),n("span",` (${r.Year})`),n("span",` - ${r.Type}`))))))(e,t):"Searching..."===e.show||"No results."===e.show?n("h3"+E.pl(36).mt(24),e.show):null),n("div"+E.ga("right"),"list"===e.show&&Object.keys(e.qone).length>0&&J(e,t)))),Z={error:(e,t)=>n("div"+E.m("auto").bsi.size(600,300).bc("#fff").p(20,16,16,16).rel.bs("0px 2px 5px 0px rgba(0,0,0,.4)").tal.ofy("auto"),n("div"+E.fs(18).fw(500).pb(13).c("#3c3c3c"),t.header||"Error"),n("div"+E.fs(14),n.trust(t.text)),n("div"+E.abs.b(16).r(24),n("span.material-icons"+E.c("#616161").pointer.$hover(E.c("#33b679")),{onclick:()=>e.modal=null},"thumb_up"))),delok:(e,t)=>n("div"+E.m("auto").bsi.size(500,140).bc("#fff").p(20,16,16,16).bs("0px 2px 5px 0px rgba(0,0,0,.4)").tal,n("div"+E.fs(18).fw(500).pb(13).c("#3c3c3c"),"Are you sure?"),n("div"+E.fs(14),t.text),n("div"+E.f("right"),n("span.material-icons"+E.m(16,24,0,0).c("#616161").pointer.$hover(E.c("#33b679")),{onclick:()=>{e.modal=null,t.click()}},"thumb_up"),n("span.material-icons"+E.mr(8).c("#616161").pointer.$hover(E.c("#ed2024")),{onclick:()=>e.modal=null},"cancel")))},Q=({attrs:e})=>{let t=!0;return setTimeout(()=>{t=!1,n.redraw()},5e3),setTimeout(()=>{e.snackbar=null,n.redraw()},6e3),{view:()=>[n("div"+E.zi(99).rel.l("-50%").b(24),{style:t?E.$animate("1s 1",{from:E.b(-100),to:E.b(24)}).style:E.b(-100).$animate("1s 1",{from:E.b(24),to:E.b(-100)}).style},n("div"+E.bsi.size(344,48).bc("#323232").c("#dedede").fs(14).tal.bo("1px solid transparent").bs("0px 2px 5px 0px rgba(0,0,0,0.4)").bor(4),n("div"+E.p(8,0,8,16).h(36).m(6,0).$hover(E.default),e.snackbar.text),e.snackbar.atext&&n("div"+E.bsi.h(36).m(6,16).fw(500).tt("uppercase").rel.t(-59).r(-4).pt(9).c("#349cfb").tar.$hover(E.pointer),{onclick:e.snackbar.action},e.snackbar.atext)))]}};E.helper({bo:e=>E.border(e),bl:e=>E.borderLeft(e),br:e=>E.borderRight(e),bt:e=>E.borderTop(e),bb:e=>E.borderBottom(e),boc:e=>E.borderColor(e),bor:e=>E.borderRadius(e),bsi:E.boxSizing("border-box"),coll:E.borderCollapse("collapse"),db:E.d("block"),dg:E.d("grid"),dn:E.d("none"),dt:E.d("table"),dib:E.d("inline-block"),tac:E.ta("center"),tal:E.ta("left"),tar:E.ta("right"),abs:E.position("absolute"),rel:E.position("relative"),fix:E.position("fixed"),fw:e=>E.fontWeight(e),of:e=>E.overflow(e),ofx:e=>E.overflowX(e),ofy:e=>E.overflowY(e),lis:e=>E.listStyle(e),mah:e=>E.maxHeight(e),mih:e=>E.minHeight(e),maw:e=>E.maxWidth(e),miw:e=>E.minWidth(e),tra:e=>E.transition(e),pos:(e,t)=>E.l(e).t(t||0===t?t:e),size:(e,t)=>E.w(e).h(t||0===t?t:e),default:E.cursor("default"),pointer:E.cursor("pointer"),text:E.cursor("text"),center:E.d("flex").jc("center").ai("center"),nowrap:E.whiteSpace("nowrap")}),E.css({body:E.m(0).p(0).ff("Open Sans, sans-serif").fs(14).c("#616161").bc("#fff"),a:E.c("#349cfb").td("none").$hover(E.pointer),input:E.pl(14).ff("Open Sans, sans-serif").fs(14).c("#616161").bc("#fff").bo("1px solid #d2d2d2").outline("none").$hover(E.bo("1px solid #616161")).$focus(E.bo("1px solid #349cfb")).$placeholder(E.c("#acacac"))});const V={list:[],movie:{},page:"list",omdb:"",modal:null,snackbar:null,sort:"alphabetic",filter:{},filters:{time:["< Time","1:30","1:45","2:00","2:15","2:30","3:00","5:00"],yrgt:["> Year","1920","1930","1940","1950","1960","1970","1980","1990","2000","2010","2015"],yrlt:["< Year","1920","1930","1940","1950","1960","1970","1980","1990","2000","2010","2015"],type:["Type","movie","series"],genre:["Genre","Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","Film-Noir","History","Horror","Music","Musical","Mystery","Romance","Sci-Fi","Sport","Thriller","War","Western"],disk:["Disk"],seen:["Seen","Yes","No"]},search:"",checks:{},eps:[],find:"",show:"",qres:{},qpage:0},X=(e=>({get:()=>n.request("/get").then(t=>{e.list=t.list,e.omdb=t.omdb,o(e),e.list.forEach(t=>e.checks[t._id]=!1),e.checks.all=!1}).catch(t=>a(e,t.message)),post:()=>n.request({method:"POST",url:"/post",data:(e=>{const t={},n=["Actors","Country","Director","Genre","Language","Metascore","Plot","Poster","Runtime","Title","Type","Writer","Year","imdbID","imdbRating","seasonsowned","seasonsseen","disk","seen"];return Object.keys(e).filter(e=>n.includes(e)).forEach(n=>{const r={Actors:()=>{t.cast=e[n]},Runtime:()=>{t.runtime="N/A"!==e[n]?e[n].split(" ")[0]:""},imdbID:()=>{t.imdbid=e[n]},imdbRating:()=>{t.rating=e[n]}};r.hasOwnProperty(n)?r[n]():t[n.toLowerCase()]=e[n]}),t.originaltitle="",t.notes="",e=r(t),t})(e.qone)}).then(t=>{e.list.push(t),o(e),e.snackbar={text:"Movie/series added.",atext:"view",action:()=>{e.movie=t,e.page="info",e.snackbar=null}}}).catch(t=>a(e,t.message)),put:()=>n.request({method:"PUT",url:"/put/"+e.movie._id,data:e.movie}).then(()=>{const t=e.list.findIndex(t=>t._id===e.movie._id);e.list[t]=r(e.movie),o(e),e.snackbar={text:"Movie(s)/series updated."}}).catch(t=>a(e,t.message)),del:t=>{t&&(e.checks[e.movie._id]=!0),Promise.all(Object.keys(e.checks).filter(t=>e.checks[t]).map(t=>{const r=e.list.find(e=>e._id===t);((t,r)=>n.request({method:"DELETE",url:"/del/"+t+"/"+r}).then(()=>{e.list=e.list.filter(e=>e._id!==t),e.checks[t]=!1,o(e)}).catch(t=>a(e,t.message)))(t,r.title)})).then(()=>{e.page="list",e.snackbar={text:"Movie(s)/series deleted."}})},mm2hm:e=>{let t="";if(0!=+e){let n=+e%60;10>n&&(n="0"+n),t=`${+e/60|0}:${n}`}return t},checkit:t=>{"all"===t?Object.keys(e.checks).forEach(t=>e.checks[t]=!e.checks[t]):e.checks[t]=!e.checks[t]},selmovie:t=>{const o=e.list.findIndex(e=>e._id===t);n.request({url:i("i",e.list[o].imdbid,e.omdb)}).then(t=>{((e,t)=>new Promise((r,i)=>{if(e.rating!==t.imdbRating||e.metascore!==t.Metascore||e.poster!==t.Poster||"series"===e.type&&+t.totalSeasons>e.seasonsowned.length){if(e.rating=t.imdbRating,e.metascore=t.Metascore,e.poster=t.Poster,"series"===e.type&&+t.totalSeasons>e.seasonsowned.length)for(let n=0;+t.totalSeasons-e.seasonsowned.length+1>n;n++)e.seasonsowned.push(!1),e.seasonsseen.push(!1);n.request({method:"PUT",url:"/put/"+e._id,data:e}).then(r).catch(i)}else r()}))(e.list[o],t).then(()=>{e.movie=r(e.list[o]),e.page="info",e.season=0}).catch(t=>a(e,t.message))})},setfilter:(t,n)=>{e.filter[t]="Yes"===n||"No"!==n&&n},selclear:()=>Object.keys(e.filters).forEach(t=>e.filter[t]=e.filters[t][0]),seen:()=>{Promise.all(Object.keys(e.checks).filter(t=>!0===e.checks[t]).map(t=>(t=>(e.list[e.list.findIndex(e=>e._id===t)].seen=!0,n.request({method:"PUT",url:"/put/"+t,data:e.list[e.list.findIndex(e=>e._id===t)]}).then(()=>{e.checks[t]=!1,e.snackbar={text:"Movie(s)/series updated."}}).catch(t=>a(e,t.message))))(t)))},geteps:t=>n.request({url:i("i",e.movie.imdbid+"&Season="+t,e.omdb)}).then(n=>{e.eps=n,e.season=t}).catch(t=>a(e,t.message)),query:()=>n.request({url:i("s",e.find,e.omdb)}).then(t=>{e.qres=t,"False"===e.qres.Response?e.show="No results.":"1"!==e.qres.totalResults?(e.qpage=1,e.show="list"):n.request({url:i("i",e.qres.Search[0].imdbID,e.omdb)}).then(t=>{e.qone=t,e.qone.seen=!1,e.show="one"})}).catch(t=>a(e,t.message)),queryid:t=>n.request({url:i("i",t,e.omdb)}).then(t=>{e.qone=t,e.qone.seen=!1,e.qone.totalSeasons&&(e.qone.seasonsowned=[...Array(+e.qone.totalSeasons).fill(!1)],e.qone.seasonsseen=[...Array(+e.qone.totalSeasons).fill(!1)])}).catch(t=>a(e,t.message)),isporn:t=>"prev"===t?(e=>10*(+e-1)+1!=1)(e.qpage):((e,t)=>!(10*+e>=t||10*+e>1e3))(e.qpage,+e.qres.totalResults),querypage:t=>{const r="&page="+("next"===t?++e.qpage:--e.qpage);return n.request({url:i("s",e.find+r,e.omdb)}).then(t=>{e.qres=t}).catch(t=>a(e,t.message))}}))(V),ee=((e,t)=>({oninit:()=>{t.get(),t.selclear()},view:()=>n("div"+E.size("100vw","100vh").center.m(0,"auto").bc("#2f5dab").of("hidden"),n("div"+E.size("80%","calc(100vh - 32px)").m("auto").bc("#fff").pos(0).r(0).b(0).tac.rel,n("img",{src:"images/movies.png"}),"list"===e.page?((e,t)=>n("div",n("div"+E.tal.mb(12),n("span"+E.rel,n("input"+E.bsi.size(300,36).ml(16).pl(40).bo("1px solid #d2d2d2").fs(13),{placeholder:"Search title...",oninput:t=>e.search=t.target.value,value:e.search}),n("span.material-icons"+E.abs.pos(22,-1).c("#acacac"),"search"),n("span.material-icons"+E.abs.pos(285,-2).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.search=""},"close")),n("span",n("a.material-icons"+E.m(0,24,0,12).va(-7).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>e.page="add"},"add"),n("span"+E.va(-8).tra("opacity 0.2s ease-in"),{style:Object.keys(e.checks).some(t=>!0===e.checks[t])?E.o(1).default.style:E.o(0).default.style},n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#33b679")),{onclick:()=>t.seen()},"check_circle"),n("a.material-icons"+E.mr(24).c("#616161").pointer.$hover(E.c("#ed2024")),{onclick:()=>e.modal={type:"delok",content:{text:`You are about to delete ${Object.keys(e.checks).filter(t=>e.checks[t]).length} movie(s)...continue?`,click:()=>t.del(!1)}}},"delete"))),n("span"+E.nowrap,Object.keys(e.filters).map(r=>n("select"+E.p(4,8),{onchange:e=>{t.setfilter(r,e.target.value),e.target.blur()}},e.filters[r].map(t=>n("option"+E.p(4,0),{selected:t===e.filter[r]},t)))),n("a.material-icons"+E.m(0,24).va(-7).c("#616161").pointer.$hover(E.c("#349cfb")),{onclick:()=>t.selclear()},"cancel")),n("span"+E.f("right").mt(8),["alphabetic","id ascending","id descending"].map(t=>n("span.material-icons"+E.mr(16).c(e.sort===t?"#349cfb":null).$hover(E.c("#349cfb").pointer),{onclick:()=>e.sort=t},"alphabetic"===t?"sort_by_alpha":"id ascending"===t?"arrow_upward":"arrow_downward")))),n("div"+E.dg.gtc("auto").gtr("auto").gta("'table'").bt("1px solid #d2d2d2"),n("div"+E.ga("table").h("calc(100vh - 193px)").of("auto"),n("table"+E.w("100%").ofy("auto").coll,n("thead"+E.w("100%").rel.zi(10).$nest("th",E.p(8,16).bc("#f5f5f5").position("sticky").t(0).pr("1em").bs("0px 1px 0px 0px #d2d2d2")),n("tr",n("th",""),n("th"+E.tac,"#"),n("th"+E.tal,"Title"),n("th"+E.tal,"Time"),n("th"+E.tal,"Year"),n("th"+E.tal,"Type"),n("th"+E.tal,"Genre"),n("th"+E.tar,"Disk"),n("th","Seen"))),n("tbody"+E.$nest("td",E.bsi.p(8,16).h(36).bb("1px solid #f5f5f5")),e.list.filter(n=>!("< Time"!==e.filter.time&&t.mm2hm(n.runtime)>e.filter.time||"> Year"!==e.filter.yrgt&&e.filter.yrgt>n.year||"< Year"!==e.filter.yrlt&&n.year>e.filter.yrlt||"Type"!==e.filter.type&&n.type!==e.filter.type||"Genre"!==e.filter.genre&&-1===n.genre.indexOf(e.filter.genre)||"Disk"!==e.filter.disk&&n.disk!==e.filter.disk||"Seen"!==e.filter.seen&&n.seen!==e.filter.seen||-1===n.title.toLowerCase().indexOf(e.search.toLowerCase()))).sort((t,n)=>"alphabetic"===e.sort?t.title.toLowerCase()>n.title.toLowerCase()?1:t.title.toLowerCase()<n.title.toLowerCase()?-1:0:"id ascending"===e.sort?t._id>n._id?1:n._id>t._id?-1:0:n._id>t._id?1:t._id>n._id?-1:0).map((r,i)=>n("tr"+E.whiteSpace("nowrap").$hover(E.bc("#efefef").pointer),n("td",W(e.checks[r._id],()=>t.checkit(r._id))),n("td",{onclick:()=>t.selmovie(r._id)},i+1),n("td"+E.tal,{onclick:()=>t.selmovie(r._id)},r.title),n("td"+E.tal,{onclick:()=>t.selmovie(r._id)},t.mm2hm(r.runtime)),n("td"+E.tal,{onclick:()=>t.selmovie(r._id)},r.year),n("td"+E.tal,{onclick:()=>t.selmovie(r._id)},r.type),n("td"+E.tal,{onclick:()=>t.selmovie(r._id)},r.genre),n("td"+E.tar,{onclick:()=>t.selmovie(r._id)},r.disk),n("td"+E.tac,{onclick:()=>t.selmovie(r._id)},n("img"+E.va(-2),r.seen?{src:"images/checkmark-16.png"}:{src:"images/xmark-16.png"}))))))))))(e,t):"info"===e.page||"edit"===e.page?G(e,t):"add"===e.page&&K(e,t),e.modal&&((e,t)=>n("div",n("div"+E.dt.abs.pos(0).size("100%").zi(99),n("div"+E.d("table-cell").va("middle"),Z[t.type](e,t.content))),n(".overlay"+E.db.zi(90).bc("#000").fix.pos(0).size("100%").o(.3))))(e,e.modal),e.snackbar&&n("div"+E.abs.b(0).l("50%").w(344),n(Q,e))))}))(V,X);n.mount(document.body,ee)}();
